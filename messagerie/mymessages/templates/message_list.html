{% extends 'base.html' %}

{% block content %}
  <h2>Mes Messages</h2>
  {% if can_post %}
    <a href="{% url 'message_create' %}" class="btn-primary" style="display:inline-block; margin-bottom:1rem; text-decoration:none; width:auto;">Nouveau Message</a>
  {% endif %}
  <hr />
  <!-- The Search Form -->
  <form method="get" action="">
    <input type="text" name="q" placeholder="Search by title or content..." value="{{ request.GET.q|default_if_none:'' }}" />
    <button type="submit">Search</button>
  </form>
  <!-- Messages List -->
  <ul>
    {% for message in messages %}
      <li>
        <a href="{% url 'message_detail' message.pk %}">{{ message.contenu|truncatechars:50 }}</a>
        <small>({{ message.date_envoi|date:'d/m/Y H:i' }})</small>
      </li>
    {% empty %}
      <li>No message.</li>
    {% endfor %}
  </ul>
{% endblock %}
