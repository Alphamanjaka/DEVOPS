{% extends 'base.html' %}

{% block content %}
  <h2>Importer des Messages (CSV)</h2>

  <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 20px;">
    <p>Le fichier CSV doit respecter le format suivant (sans en-tête) :</p>
    <code>Contenu du message, AAAA-MM-JJ HH:MM:SS, Username</code>
  </div>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div style="margin-bottom: 20px;">
      <input type="file" name="csv_file" accept=".csv" required class="btn-primary" style="background: white; color: black; border: 1px solid #ccc;" />
    </div>
    <button type="submit" class="btn-primary">Lancer l'importation</button>
    <a href="{% url 'message_list' %}" style="margin-left: 10px;">Annuler</a>
  </form>

  <!-- Affichage des messages Flash (Succès import CSV, etc.) -->
  {% if messages %}
    <div style="margin-bottom: 20px;">
      {% for message in messages %}
        <div style="padding: 10px; border-radius: 5px; margin-bottom: 5px; 
             {% if message.tags == 'success' %}
            background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;

          {% elif message.tags == 'warning' %}
            background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba;

          {% else %}
            background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;
          {% endif %}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
